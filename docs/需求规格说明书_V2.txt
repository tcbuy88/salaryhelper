# 劳动纠纷处理 H5 应用（前后端）需求规格说明书

版本：1.0  
作者：tcbuy88（按请求整理）  
日期：2025-11-02

前言：本说明书面向产品经理、后端/前端开发、测试、运维与法务顾问，描述一个在中国大陆运行的以“劳动纠纷处理”为核心的 H5（移动端网页）应用的完整需求、设计方案、开发流程、技术方案与部署方案。系统由前端用户界面与后端管理系统组成，内置大模型对话、知识库、会员与付费体系、订单与统计、系统管理等功能，并兼顾合规与安全。

一、项目概述
- 名称（暂定）：SalaryHelper（劳动纠纷助手）
- 目标：为劳动者（员工）与相关代理人提供便捷的劳动纠纷自助咨询、证据整理、赔偿估算、仲裁/诉讼流程指引及在线付费/会员服务，结合大模型与结构化法律知识，降低维权门槛，提高办案效率。
- 主要用户：
  - 个人劳动者（员工）
  - 工会/社团与律所的普通用户入口
  - 公司法务或HR（阅读/参考）
  - 平台管理员与客服人员

二、交付物（需求包）
- 完整需求文档（本文件）
- 前端 H5 应用（移动优先、响应式）源码（Vue/React + TypeScript）
- 后端 API 与管理平台源码（TypeScript/NestJS 或 Python/FastAPI）
- 数据库迁移脚本与 ER 文档（PostgreSQL）
- 部署脚本（Docker/Kubernetes Helm charts）
- CI/CD pipeline（GitHub Actions/GitLab CI）
- 测试用例与 QA 报告
- 运维手册（备份、监控、日志）
- 法务合规说明（PIPL / 本地合规要点）

三、核心功能（按前端/后端划分）

3.1 前端（用户侧 H5）
1) 与大模型对话与历史记录
   - 会话界面，支持文本、可选的语音输入（转文本）
   - 会话历史保留：按用户、按会话、按话题分组
   - 支持对话标签（如“薪资纠纷”“加班”“合同解除”）与会话导出（PDF/文本）
   - 会话级别的证据关联（用户可上传图片、文档并关联到某次会话）

2) 劳动纠纷相关知识模块（知识中心）
   - 处理流程（仲裁 → 诉讼）逐步指引
   - 劳动法条文解读（条文 + 通俗版）
   - 相关案例分析（按地区与专题筛选）
   - 工资赔偿计算器（基于法律依据，自动引用计算逻辑并展示依据）
   - 证据收集指南（按类型：工资单、社保缴费记录、考勤、聊天记录等）
   - 救济途径比较（仲裁/诉讼/行政举报/媒体舆论）
   - 各地劳动部门信息库（地址、联系电话、受理部门、办事指南、网上预约链接）
   - 其他辅助部门或投诉电话（市场监管、税务、公安等）
   - 诉讼与仲裁所需材料清单（可生成材料清单与模板）

3) 收费与在线充值
   - 套餐/单次咨询/律师服务购买
   - 支持微信支付、支付宝、银联（可扩展）
   - 充值/钱包机制、发票/收据申请

4) 会员注册与登录
   - 手机号 + 验证码为主的轻量认证
   - 支持第三方登录（微信授权）作为可选
   - 完整的个人资料页（可补充身份证信息以便律师服务）
   - 会员等级/权限与到期提醒

5) 其他交互与辅助
   - 文档上传与管理（证据库）
   - 案例检索、收藏、分享
   - 预约律师或线下服务（与第三方对接）
   - 通知中心（系统通知、支付通知、仲裁节点提醒）
   - FAQ 与快速反馈入口

3.2 后端（系统管理与业务支撑）
1) 系统管理与设置（Admin）
   - 平台设置（站点信息、客服电话、隐私协议）
   - 第三方集成配置：大模型 API（OpenAI/本地模型/厂商）、MCP（Model Control Platform, 如有）、支付接口（微信/支付宝/银联）、短信网关（腾讯/阿里）
   - 权限与角色管理（RBAC：超级管理员/运营/客服/法务/统计）

2) 会员管理
   - 查询、修改、冻结、删除、导出会员信息
   - 充值记录、消费记录、退款操作
   - 账户安全审计（登录日志、异常行为）

3) 大模型会话管理
   - 会话存储、审计、导出
   - 会话调试工具（查看 prompt、模型调用记录、token 使用统计）
   - 会话内容的人工复核/历史快照

4) 知识分类与管理
   - 知识库（条文、案例、流程、模板）CRUD
   - 知识向量化/检索（RAG：向量索引 + 文本检索）
   - 地区化内容管理（按省/市/区差异化信息）
   - 批量导入/导出（CSV/Excel）

5) 订单管理
   - 支付订单、退款、发票管理
   - 服务/商品管理（产品SKU、价格、时效）
   - 结算管理（若接入律师/第三方，需要分账逻辑）

6) 业务统计与 BI
   - 用户增长、付费转化、会话量、热门问题、地区分布
   - 导出报表（CSV、图表）
   - 配置定期统计任务（日报/周报/月报）

7) 日志管理
   - 访问日志、支付日志、模型调用日志（含成本统计）
   - 告警与异常监控日志（错误率、延迟）

8) 安全与合规功能
   - 敏感信息脱敏与审批流程（例如律师查看身份证）
   - 数据保全与取证（完整时间戳、不可篡改的操作记录）
   - 隐私协议与授权记录存档

四、补充建议功能（提升可操作性与价值）
- 律师/代理人匹配平台：按地域、擅长领域、评分匹配付费咨询或委托
- 文书模板库 + 在线自动填表（基于用户信息自动生成仲裁申请书、起诉状）
- 证据时间线可视化（把证据按时间排序，生成事件线）
- 一键导出案件包（包含聊天记录、证据、材料清单）用于仲裁/诉讼提交
- 电子签名与合同模板（对接可信电子签章）
- 法务知识学习模块（短课程、热门法条解读）
- 本地化运营工具：地区分公司/代理管理，分站内容差异化
- 合作机构后台：律师入驻、服务上架、结算管理

五、非功能性需求
1) 可用性与性能
   - 平均响应 < 300ms（静态页面），API 平均 < 500ms（不含模型调用）
   - 高峰并发目标：首期 1000 QPS（可扩展）
   - 模型调用要有队列与限流（避免费用暴涨）

2) 扩展性
   - 模块化、服务化设计（便于后续分布式部署）
   - 插件式第三方集成（支付、短信、AI 模型）

3) 安全
   - HTTPS 强制（TLS 1.2+）
   - 数据库加密（敏感字段加密）
   - RBAC 权限控制与审计
   - 防爬虫与反滥用（速率限制、验证码）
   - 支付合规（证书、回调签名校验）
   - 符合《中华人民共和国个人信息保护法》（PIPL）

4) 可维护性
   - 日志结构化（ELK/EFK）
   - 健康检查与自动恢复
   - 单元/集成测试覆盖关键路径

5) 合规性
   - 法律顾问参与内容审核与条款制定
   - 模型回答需附带“参考来源/条文依据”与免责声明
   - 用户隐私同意（隐私政策、使用条款）

六、数据模型（核心表/字段示例）
- users: id, phone, password_hash, name, id_number（加密）, role, membership_id, created_at, last_login
- memberships: id, name, price, duration_days, privileges (JSON)
- conversations: id, user_id, title, tags (array), created_at, updated_at
- messages: id, conversation_id, sender_type (user/system/ai), content (文本/markdown), attachments (array), metadata (JSON), created_at
- knowledge_items: id, type (法条/案例/流程/模板), title, content, region, tags, source, vector_id
- orders: id, user_id, sku, amount, pay_method, status, txn_id, created_at
- payments: id, order_id, provider, amount, status, callback_data
- evidence: id, user_id, type, file_url, metadata, uploaded_at
- logs: id, user_id, action, ip, metadata, created_at

七、主要 API 设计（示例）
- POST /api/v1/auth/send-sms    参数: phone → 发送验证码
- POST /api/v1/auth/login       参数: phone, code → 返回 token
- GET  /api/v1/user/profile
- POST /api/v1/conversations    新建会话
- GET  /api/v1/conversations/{id}
- POST /api/v1/conversations/{id}/messages 发送消息（会触发模型调用）
- GET  /api/v1/knowledge?query=&region=&type=
- POST /api/v1/upload    上传证据（返回文件 id/url）
- POST /api/v1/orders/create
- POST /api/v1/payments/callback/{provider}
- Admin: GET /admin/users, PUT /admin/users/{id}, GET /admin/orders, GET /admin/model/usage

八、大模型集成方案（安全、成本、可用）
1) 模型来源与策略
   - 优先选择可在中国大陆稳定调用的模型供应商（例如本地厂商：文心一言、讯飞、阿里、百度等）或自建模型（MCP + 私有部署），并保留对外部服务（OpenAI）作为备选（需代理与合规）
   - 使用 RAG（检索增强生成）：先做向量检索（知识库/法条/案例），将检索结果作为 context 拼接到 prompt，降低虚构回答风险。

2) Prompt 与回答策略
   - 统一的 prompt 模板：包含身份说明（“你是劳动法方向的咨询助手”）、回答风格（法律严谨、先给结论再给依据）、必须返回的元素（结论、依据条款、操作步骤、证据清单、推荐操作）
   - 强制在回答末尾添加“参考条目/条文或案例来源”或“如需法律意见建议联系执业律师”

3) 会话与成本控制
   - 会话限额与会员等级绑定（非会员：免费若干条/天）
   - 模型调用排队、超时与降级策略（超时返回“当前服务繁忙，请稍后”）
   - 保存 prompt、模型响应、计费信息（token count 或按调用计费）

4) 风险与审计
   - 模型回答需保留全量日志以便事后审计
   - 人工复核通道（可对敏感/付费会话进行人工审核）

九、支付与计费设计
- 支付方式：微信支付（JSAPI/H5）、支付宝手机网页支付、银联（如需）
- 计费模型：
  - 免费额度（入门咨询若干次）
  - 月/年会员包（无限或更高会话配额）
  - 单次付费（律师咨询/文书起草）
  - 增值服务（律师代理、证据保全）
- 退款与纠纷处理：支持在订单状态中设定退款流程（人工审批），并在 Admin 可操作
- 财务对账：生成每日对账单，支持导出与第三方结算（对接代付/分账接口）

十、会员与权限设计
- 角色：普通用户、付费会员、律师、平台管理员、客服
- 权限控制：RBAC，基于 JWT + 后端权限校验
- 会员权益：更多对话额度、优先人工服务、模板下载次数、折扣
- 会员生命周期管理（到期提醒、自动续费可选）

十一、日志、审计与数据保全
- 记录：登陆、重要操作、模型调用、支付回调、证据上传
- 日志落地：结构化日志（JSON）送 ELK/EFK；重要日志 7 年保留（根据取证要求）
- 证据链：保存文件哈希与上传时间戳（便于取证）
- 备份：数据库每日全量备份、周差异备份；文件对象存储多副本

十二、业务统计与指标
- 关键指标（KPI）：日活/月活、付费转化率、平均会话时长、模型调用成本、人均收入（ARPU）
- 仪表盘：可配置维度（时间/地区/渠道/问题类型）

十三、技术选型（建议）
前端：
- Vue 3 + TypeScript + Vite 或 React + TypeScript（React Native 不需要，H5）
- UI：Vant/Ant Design Mobile
- 状态管理：Pinia / Redux Toolkit
- 国际化/多语言：i18n（后续扩展）

后端：
- Node.js + TypeScript + NestJS（模块化、易扩展）或 Python + FastAPI（性能优良）
- Web 框架：REST + 部分 GraphQL（可选）
- 数据库：PostgreSQL（关系数据），Redis（缓存、会话、限流）
- 向量检索：Milvus / Weaviate / Qdrant / ElasticSearch（带相似检索）
- 文件存储：对象存储（MinIO 或 阿里/腾讯 OSS）
- 搜索：ElasticSearch（全文检索）
- 队列：RabbitMQ / Kafka / Redis Streams（异步任务、模型调用队列）
- 认证：JWT（短期） + Refresh Tokens；短信登录（第三方 SDK）
- 日志/监控：EFK（Elasticsearch/Fluentd/Kibana）或 Loki + Grafana；Prometheus 监控

十四、开发流程与里程碑（建议敏捷分阶段）
团队建议：产品经理、两名前端、两名后端、1 名算法/AI、1 名测试、1 名运维、法务顾问、1 名 UI 设计。

示例时间表（按 2 周 Sprint）：
- Sprint 0（准备，2 周）：需求敲定、原型、技术选型、基础环境搭建
- Sprint 1（2 周）：用户注册/登录、基础页面、证据上传、DB 初始建模
- Sprint 2（2 周）：对话界面 + 简单模型接入（测试模型），会话存储
- Sprint 3（2 周）：知识库展示、查询、基本 RAG 检索
- Sprint 4（2 周）：支付/订单系统、会员体系、充值流程
- Sprint 5（2 周）：Admin 后台基础（用户/订单/知识管理）
- Sprint 6（2 周）：RAG 完善、律师匹配、文书模板导出
- Sprint 7（2 周）：测试、性能优化、安全加固
- 部署与上线准备（2 周）：部署脚本、回滚策略、灰度发布
- 上线后（持续）：BUG 修复、迭代功能、运营优化

十五、测试计划
- 单元测试、集成测试、端到端测试（Selenium / Playwright）
- 安全测试：渗透测试、支付回调漏洞检测
- 压力测试：模型调用峰值、文件上传并发测试
- 法务审核：内容合规检查、免责声明文本测试

十六、部署方案（示例）
1) 基础设施（首选中国大陆云）
   - 云厂商：腾讯云、阿里云或华为云（根据预算与地域）
   - 节点：Kubernetes 集群（EKS / ACK / TKE）
   - 注册域名并配置 CDN（静态资源）
   - 数据库：托管 PostgreSQL（RDS），主备部署
   - 对象存储：OSS / COS 或 MinIO（自建）
   - 向量服务：独立集群部署（Milvus / Qdrant）
   - 模型服务：根据供应商（外部 API）或私有模型部署在 GPU 节点（若自建）

2) 容器与 CI/CD
   - Docker 镜像构建，镜像仓库（Harbor / 阿里云镜像）
   - CI/CD：GitHub Actions / GitLab CI
   - 部署：Helm charts 部署到 Kubernetes
   - 滚动更新、灰度发布（可以用 Istio/Service Mesh 支持流量控制）

3) 监控与告警
   - Prometheus + Grafana（指标）
   - ELK / Loki + Grafana（日志）
   - 告警：钉钉/企业微信/邮件/短信

4) 灾备与备份
   - 主备跨可用区部署
   - 日常备份策略（数据库、对象存储）
   - 异地备份（季度演练恢复）

十七、运维与合规建议
- 上线前与法务确认隐私条款、数据保留政策、证据保存合规性
- 建立安全事件响应流程（SOP）
- 支付通道需要工商、税务资料对接（发票自动化）
- 定期模型输出审核，避免法律意见错误造成法律风险

十八、风险评估与缓解
- 风险：模型给出错误或误导性法律建议 → 缓解：RAG + 明确免责声明 + 人工复核（付费高等级）
- 风险：支付/退款纠纷 → 缓解：完善订单状态机、人工客服介入
- 风险：数据泄露 → 缓解：加密、最小权限、定期安全审计
- 风险：第三方依赖不可用 → 缓解：多供应商策略与降级流程

十九、估算（粗略）
- 人力：初期核心团队（6-8 人）× 3 个月可产出 MVP
- 服务器与运营成本：小规模测试可用 1-2 万/月（含模型调用按外部计费），生产部署及 GPU 模型成本另计
- 合规与法律咨询：按咨询市场价计入（建议上线前至少一次全面法务审查）

二十、商业模式与收费标准
- 目标：通过免费引流 + 分层付费产品 + 增值服务实现转化与长期付费用户留存，兼顾社会公益属性与商业可持续性。
- 收费与套餐设计（建议直接在 App 与后台产品页同步配置）：

  免费层（引流）：
  - 免费提供 5 次 AI 智能对话咨询（新用户或非会员统一策略）。
  - 免费可阅读基础的法律知识和流程文章（知识库公开部分）。

  入门版 - ￥19.99：
  - 仅包含《仲裁申请书》或《投诉申请书》的生成工具（单一文书模板选择）。
  - 目标用户：诉求极其简单、仅需核心文书辅助的用户。
  - 购买后可生成并下载相应文书 1 次，支持导出 PDF/Word。

  标准版 - ￥39.99（核心产品）：
  - 解锁单个案件的全流程使用权限（从证据整理 → 文书生成 → 估算赔偿 → 流程指引）。
  - 包含所有文书自动生成工具（投诉书、仲裁申请书、起诉状等）。
  - 包含证据清单、计算器、模拟开庭（文字/视频演练）等所有核心功能。
  - 有效期：至该案件执行完毕（或按后台定义的案件关闭规则，例如连续 180 天无活动则自动关闭）。
  - 支持一次性上传并储存该案件的证据包（保留在用户证据库内，按付费策略设置权限）。

  高级版 - ￥99（高价值用户）：
  - 包含标准版所有功能。
  - 增加 3 次人工文书审核服务（由法务/专职人员对自动生成文书进行格式与法律要点审核并给建议，响应时限在 SLA 范围内）。
  - 增加 1 次 30 分钟的专业律师电话咨询（可用于复杂问题、流程确认或策略讨论）。
  - 高级版用户优先进入人工审核与律师匹配队列。

  其他增值服务：
  - 一对一电话/视频咨询：对话外的付费服务，按 15/30 分钟计费（会员可享折扣或免费时长）。
  - 律师代理对接平台：对于复杂案件，App 可作为平台，为用户推荐并对接熟悉当地司法环境的专业劳动法律师，平台收取少量介绍费或服务佣金（可按成功代理费比例或固定介绍费）。
  - 文书代写/代理服务：人工代写文书、证据保全、现场委托等可单独计价并在订单中体现。
  - 续费与套餐折扣：会员可选择月/年续费，年费用户可享折扣与更高权益。
  - 分账与结算：对于律师/第三方服务，后台需支持分账结算与对账导出。

- 计费与风控要点：
  - 付费流程需实现订单、支付、发票、退款全链路管理并能供财务对账；支付回调严格验签并记录。
  - 对于涉及人工服务的退款、纠纷需设置人工审批流程，保留会话与通话录音作为仲裁证据（需用户同意录音策略）。
  - 对于律师接单平台，合同/服务协议需明确平台和律师的责任边界，并由法务起草标准协议。
  - 定价策略可在上线后根据转化率与成本动态调整（A/B 测试）。

二十一、交互原型要点（概要）
- 首页：搜索 + 快速问题入口（常见问题）
- 会话页：顶部会话标题、对话区（可折叠证据区）、底部输入区（文本/语音/上传）
- 知识页：目录侧边/筛选、文章页带“引用条文”与“使用模板”按钮
- 钱包页：余额、充值、套餐、消费记录
- Admin：仪表盘、用户管理、知识管理、订单管理、模型配置页

附录 A：API 安全与合规注意项（要点）
- 支付回调必须严格校验签名并记录
- 身份证等敏感信息必须加密存储并提供删除/匿名化流程
- 模型回答若牵涉法律意见必须明显提示“仅供参考”，不得表述为律师意见（除非连接执业律师并在合同/付费条款中明确）

附录 B：示例 Prompt 模板（供算法团队使用）
- System: "你是劳动法方向的智能顾问。回答应法律严谨、先给结论，再列出法律依据与操作步骤。若信息不足，请提出补充问题。"
- User-context: [用户提供的 case summary]
- Retrieved documents: [RAG 返回的法条/案例摘要]
- Task: "基于上文给出可能的处理路径（仲裁/诉讼/行政），估算赔偿（说明公式与依据），并给出 5 个可以立即执行的步骤与所需材料清单。"

结语（进度叙述）
我已将您提供的“商业模式与收费标准”内容准确并入需求规格说明书中（见“二十、商业模式与收费标准”节），同时将原文的会员/支付/订单设计与该商业模式进行了要点衔接（计费流程、风控、分账等）。下一步我可以（1）把该文档拆成可用于产品评审的用户故事与优先级列表；或（2）直接输出用于开发任务管理（Jira/Trello）的 Issue 清单供您分配开发人员。请选择您希望我继续的方向，我会立刻开始拆分并交付相应清单。